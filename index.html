
<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Productions</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background: url('background.jpg') no-repeat center center fixed;
      background-size: cover;
      color: white;
      margin: 0;
      display: flex;
      justify-content: center;
      align-items: center;
      flex-direction: column;
      height: 100vh;
      overflow: hidden;
    }
    .container {
      background: rgba(0, 0, 0, 0.8);
      padding: 40px;
      border-radius: 20px;
      box-shadow: 0 0 30px rgba(0,0,0,0.8);
      max-width: 700px;
      text-align: center;
    }
    h1 {
      font-size: 36px;
      margin-bottom: 20px;
    }
    .question {
      font-size: 20px;
      margin-bottom: 20px;
    }
    .choices {
      display: flex;
      flex-direction: column;
      gap: 10px;
      margin-bottom: 20px;
    }
    .choices button {
      padding: 12px;
      font-size: 16px;
      border-radius: 10px;
      border: none;
      background-color: #2a516e;
      color: white;
      cursor: pointer;
      transition: 0.3s;
    }
    .choices button:hover {
      background-color: #3a6c8f;
    }
    .hidden {
      display: none;
    }
    #finalImage {
      margin-top: 20px;
      max-width: 100%;
      border-radius: 15px;
      box-shadow: 0 0 20px rgba(255,255,255,0.4);
    }
    .progress {
      font-size: 16px;
    }
    .message {
      font-size: 18px;
      margin-top: 15px;
    }
    .lightning-flash {
      position: fixed;
      top: 0;
      left: 0;
      height: 100%;
      width: 100%;
      background: white;
      opacity: 0;
      pointer-events: none;
      z-index: 9999;
    }
    .flash-active {
      animation: flash 0.3s ease-out;
    }
    @keyframes flash {
      0% { opacity: 0; }
      50% { opacity: 0.8; }
      100% { opacity: 0; }
    }
    #exitFullscreenBtn {
      display: none;
      position: fixed;
      top: 10px;
      left: 10px;
      padding: 8px 12px;
      border: none;
      border-radius: 8px;
      font-size: 14px;
      background-color: #a00;
      color: white;
      z-index: 9999;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <button id="exitFullscreenBtn" onclick="exitFullscreen()">Quitter le plein √©cran</button>
  <div class="container">
    <button onclick="launchFullscreen()" style="margin-bottom:15px;padding:10px 20px;border:none;border-radius:10px;font-size:16px;background-color:#2a516e;color:white;cursor:pointer;">Activer le plein √©cran</button>
    <h1>Productions</h1>
    <div id="game">
      <div class="question" id="question">Chargement‚Ä¶</div>
      <div class="choices" id="choices"></div>
      <div class="progress" id="progress">√ânigme 1 sur 7</div>
    </div>
    <div id="feedback" class="hidden">
      <p class="message" id="feedbackText"></p>
      <button id="skipButton" style="margin-top:12px;padding:8px 16px;border:none;border-radius:10px;font-size:14px;background-color:#555;color:white;cursor:pointer;">‚è© Passer</button>
    </div>
    <div id="finalScreen" class="hidden">
      <p class="message">üéâ F√©licitations ! Vous avez r√©ussi le jeu-questionnaire sur les productions. Vous avez maintenant droit au <strong>code d‚Äôacc√®s</strong> :</p>
      <img id="finalImage" src="final_code_image.png" alt="Code d'acc√®s final">
    </div>
    <audio id="flashSound" loop autoplay>
      <source src="storm_effect.mp3" type="audio/mpeg">
    </audio>
    <div class="lightning-flash" id="flash"></div>
  </div>

  <script>
    function launchFullscreen() {
      const el = document.documentElement;
      if (el.requestFullscreen) el.requestFullscreen();
      else if (el.webkitRequestFullscreen) el.webkitRequestFullscreen();
      else if (el.msRequestFullscreen) el.msRequestFullscreen();
    }

    function exitFullscreen() {
      if (document.exitFullscreen) {
        document.exitFullscreen();
      } else if (document.webkitExitFullscreen) {
        document.webkitExitFullscreen();
      } else if (document.msExitFullscreen) {
        document.msExitFullscreen();
      }
    }

    document.addEventListener("fullscreenchange", () => {
      const btn = document.getElementById("exitFullscreenBtn");
      btn.style.display = document.fullscreenElement ? "block" : "none";
    });

    const sound = document.getElementById("flashSound");
    window.addEventListener("load", () => {
      sound.play().catch(() => {
        const resumeAudio = () => {
          sound.play();
          document.removeEventListener("click", resumeAudio);
          document.removeEventListener("keydown", resumeAudio);
        };
        document.addEventListener("click", resumeAudio);
        document.addEventListener("keydown", resumeAudio);
      });
    });

    
const questions = [
  {
    question: "Qu‚Äôest-ce qu‚Äôune production d‚Äô√©l√®ve permet de d√©montrer?",
    choices: ["Ses notes d‚Äôexamen", "Son comportement en classe", "Ses connaissances et comp√©tences", "Son assiduit√©"],
    correct: 2,
    feedbacks: [
      "‚ùå Les notes d'examen ne refl√®tent pas n√©cessairement ce que l'√©l√®ve sait faire concr√®tement. Recommencez.",
      "‚ùå Le comportement n‚Äôest pas une preuve d‚Äôapprentissage. Recommencez.",
      "‚úÖ Une production permet de rendre visibles les connaissances et comp√©tences mobilis√©es.",
      "‚ùå L‚Äôassiduit√© est importante, mais ne prouve pas ce que l‚Äô√©l√®ve a compris. Recommencez."
    ]
  },
  {
    question: "Quels types de productions peuvent √™tre utilis√©es?",
    choices: ["Seulement les productions √©crites", "Uniquement les productions orales", "Des productions orales, √©crites ou visuelles", "Des productions collectives uniquement"],
    correct: 2,
    feedbacks: [
      "‚ùå R√©duire les productions √† l‚Äô√©crit limite l‚Äôaccessibilit√© pour plusieurs √©l√®ves. Recommencez.",
      "‚ùå L‚Äôoral est riche, mais insuffisant seul pour √©valuer toutes les comp√©tences. Recommencez.",
      "‚úÖ L‚Äôutilisation de formes vari√©es permet d‚Äô√©valuer diff√©rents types d‚Äôapprentissage.",
      "‚ùå Les productions collectives sont riches, mais ne permettent pas toujours d‚Äô√©valuer l‚Äôindividu. Recommencez."
    ]
  },
  {
    question: "Pourquoi les productions sont-elles importantes dans la triangulation?",
    choices: ["Elles permettent d‚Äô√©viter les tests standardis√©s", "Elles compl√®tent les observations et les conversations", "Elles remplacent le jugement professionnel", "Elles servent √† d√©corer la classe"],
    correct: 1,
    feedbacks: [
      "‚ùå Ce n‚Äôest pas leur fonction principale. Recommencez.",
      "‚úÖ Les productions sont un pilier de la triangulation avec les observations et conversations.",
      "‚ùå Rien ne remplace le jugement professionnel, mais les productions l‚Äôinforment. Recommencez.",
      "‚ùå Ce n‚Äôest pas une justification p√©dagogique valide. Recommencez."
    ]
  },
  {
    question: "Quelle est une bonne pratique lors de l‚Äô√©valuation d‚Äôune production?",
    choices: ["Noter au hasard avec la m√©thode de l'escalier", "Se baser uniquement sur la propret√© du travail", "Mettre le r√©sultat en pourcentage", "Utiliser des crit√®res clairs et communs"],
    correct: 3,
    feedbacks: [
      "‚ùå Une m√©thode au hasard n‚Äôest jamais d√©fendable. Recommencez.",
      "‚ùå La propret√© ne garantit pas la ma√Ætrise des apprentissages. Recommencez.",
      "‚ùå Le pourcentage seul ne refl√®te pas les forces et d√©fis de l‚Äô√©l√®ve. Recommencez.",
      "‚úÖ Des crit√®res explicites soutiennent une √©valuation juste et transparente."
    ]
  },
  {
    question: "Vrai ou faux? Il faut absolument √©viter de donner aux √©l√®ves le choix concernant la forme de la production car vous √™tes le maitre incontest√© de votre classe!",
    choices: ["Vrai", "Faux"],
    correct: 1,
    feedbacks: [
      "‚ùå Offrir du choix favorise la motivation et l'engagement. Recommencez.",
      "‚úÖ Le choix favorise la diff√©renciation et l‚Äôautonomie des √©l√®ves."
    ]
  },
  {
    question: "Pourquoi une production est-elle utile pour l‚Äôenseignant?",
    choices: ["Elle permet de remplir le bulletin sans autres donn√©es", "Elle sert √† illustrer les devoirs √† faire", "Elle rend visible l‚Äôapplication des connaissances", "Elle √©vite d‚Äôavoir √† faire des observations"],
    correct: 2,
    feedbacks: [
      "‚ùå Le bulletin doit s'appuyer sur des preuves vari√©es, pas seulement une production. Recommencez.",
      "‚ùå Ce n‚Äôest pas son r√¥le premier. Recommencez.",
      "‚úÖ Une production rend tangible le transfert et l‚Äôint√©gration des apprentissages.",
      "‚ùå Les observations sont essentielles en √©valuation. Recommencez."
    ]
  },
  {
    question: "Vrai ou faux? L‚Äô√©l√®ve doit toujours faire sa production seul pour qu‚Äôelle soit valide.",
    choices: ["Vrai", "Faux"],
    correct: 1,
    feedbacks: [
      "‚ùå Le travail collaboratif peut aussi d√©montrer les comp√©tences d‚Äôun √©l√®ve. Recommencez.",
      "‚úÖ La collaboration est l√©gitime; ce sont les crit√®res qui guident la validit√©."
    ]
  }
];
 // OMITTED HERE: reuse same questions/feedbacks structure

    let current = 0;
    const questionEl = document.getElementById("question");
    const choicesEl = document.getElementById("choices");
    const progressEl = document.getElementById("progress");
    const gameEl = document.getElementById("game");
    const feedbackEl = document.getElementById("feedback");
    const feedbackText = document.getElementById("feedbackText");
    const finalScreen = document.getElementById("finalScreen");
    const skipBtn = document.getElementById("skipButton");

    function triggerLightning() {
      const flash = document.getElementById("flash");
      flash.classList.add("flash-active");
      setTimeout(() => flash.classList.remove("flash-active"), 300);
    }

    function showQuestion() {
      const q = questions[current];
      questionEl.textContent = q.question;
      choicesEl.innerHTML = "";
      q.choices.forEach((choice, index) => {
        const btn = document.createElement("button");
        btn.textContent = choice;
        btn.onclick = () => {
          triggerLightning();
          const isWrong = index !== q.correct;
          let seconds = isWrong ? 9 : 7;
          let feedback = q.feedbacks[index];
          function updateCountdown() {
            feedbackText.innerHTML = feedback + "<br><br><strong>Changement dans <span id='countdown'>" + seconds + "</span> secondes...</strong>" +
              (isWrong ? "<br><br><em>Vous devez tout recommencer pour vous √©chapper du triangle.</em>" : "");
          }
          updateCountdown();
          gameEl.classList.add("hidden");
          feedbackEl.classList.remove("hidden");
          skipBtn.onclick = () => { seconds = 0; };
          const interval = setInterval(() => {
            seconds--;
            updateCountdown();
            if (seconds <= 0) {
              clearInterval(interval);
              feedbackEl.classList.add("hidden");
              if (isWrong) {
                current = 0;
              } else {
                current++;
              }
              if (current >= questions.length) {
                finalScreen.classList.remove("hidden");
              } else {
                gameEl.classList.remove("hidden");
                showQuestion();
              }
            }
          }, 1000);
        };
        choicesEl.appendChild(btn);
      });
      progressEl.textContent = `√ânigme ${current + 1} sur ${questions.length}`;
    }

    window.onload = showQuestion;
  </script>
</body>
</html>
